{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_input_password = _resolveComponent(\"a-input-password\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_card = _resolveComponent(\"a-card\");\n  const _component_a_layout_content = _resolveComponent(\"a-layout-content\");\n  const _component_a_layout = _resolveComponent(\"a-layout\");\n  return _openBlock(), _createBlock(_component_a_layout, {\n    class: \"layout\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_layout_content, {\n      style: {\n        \"padding\": \"24px\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_card, {\n        title: \"新用户注册\",\n        bordered: false\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_form, {\n          model: $data.registerForm,\n          rules: $data.rules,\n          onFinish: $options.login\n        }, {\n          default: _withCtx(() => [_createVNode(_component_a_form_item, {\n            name: \"username\",\n            label: \"新用户名\",\n            labelCol: {\n              span: 24\n            },\n            wrapperCol: {\n              span: 24\n            },\n            hasFeedback: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_input, {\n              value: $data.registerForm.username,\n              \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $data.registerForm.username = $event)\n            }, null, 8 /* PROPS */, [\"value\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_a_form_item, {\n            name: \"password\",\n            label: \"密码\",\n            labelCol: {\n              span: 24\n            },\n            wrapperCol: {\n              span: 24\n            },\n            hasFeedback: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_input_password, {\n              value: $data.registerForm.password,\n              \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $data.registerForm.password = $event)\n            }, null, 8 /* PROPS */, [\"value\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_a_form_item, {\n            name: \"confirm\",\n            label: \"确认密码\",\n            labelCol: {\n              span: 24\n            },\n            wrapperCol: {\n              span: 24\n            },\n            hasFeedback: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_input_password, {\n              value: $data.registerForm.confirm,\n              \"onUpdate:value\": _cache[2] || (_cache[2] = $event => $data.registerForm.confirm = $event)\n            }, null, 8 /* PROPS */, [\"value\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_a_form_item, {\n            name: \"employeeKey\",\n            label: \"员工密钥（可选）\",\n            labelCol: {\n              span: 24\n            },\n            wrapperCol: {\n              span: 24\n            }\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_input, {\n              value: $data.registerForm.employeeKey,\n              \"onUpdate:value\": _cache[3] || (_cache[3] = $event => $data.registerForm.employeeKey = $event)\n            }, null, 8 /* PROPS */, [\"value\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_a_form_item, {\n            name: \"phone\",\n            label: \"手机号（可选）\",\n            labelCol: {\n              span: 24\n            },\n            wrapperCol: {\n              span: 24\n            }\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_input, {\n              value: $data.registerForm.phone,\n              \"onUpdate:value\": _cache[4] || (_cache[4] = $event => $data.registerForm.phone = $event)\n            }, null, 8 /* PROPS */, [\"value\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_a_form_item, {\n            wrapperCol: {\n              span: 24,\n              offset: 0\n            }\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_button, {\n              type: \"primary\",\n              htmlType: \"submit\"\n            }, {\n              default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"提交注册\")])),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_a_button, {\n              style: {\n                \"margin-left\": \"8px\"\n              },\n              onClick: $options.handleCancel\n            }, {\n              default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"取消注册\")])),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"onClick\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model\", \"rules\", \"onFinish\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createBlock","_component_a_layout","class","default","_withCtx","_createVNode","_component_a_layout_content","style","_component_a_card","title","bordered","_component_a_form","model","$data","registerForm","rules","onFinish","$options","login","_component_a_form_item","name","label","labelCol","span","wrapperCol","hasFeedback","_component_a_input","value","username","_cache","$event","_","_component_a_input_password","password","confirm","employeeKey","phone","offset","_component_a_button","type","htmlType","_createTextVNode","onClick","handleCancel"],"sources":["E:\\code\\Django\\project\\front\\front\\src\\components\\EnrollWindow.vue"],"sourcesContent":["<template>\r\n  <a-layout class=\"layout\">\r\n    <a-layout-content style=\"padding: 24px\">\r\n      <a-card title=\"新用户注册\" :bordered=\"false\">\r\n        <a-form :model=\"registerForm\" :rules=\"rules\" @finish=\"login\">\r\n          <a-form-item\r\n            name=\"username\"\r\n            label=\"新用户名\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n            hasFeedback\r\n          >\r\n            <a-input v-model:value=\"registerForm.username\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"password\"\r\n            label=\"密码\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n            hasFeedback\r\n          >\r\n            <a-input-password v-model:value=\"registerForm.password\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"confirm\"\r\n            label=\"确认密码\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n            hasFeedback\r\n          >\r\n            <a-input-password v-model:value=\"registerForm.confirm\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"employeeKey\"\r\n            label=\"员工密钥（可选）\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n          >\r\n            <a-input v-model:value=\"registerForm.employeeKey\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"phone\"\r\n            label=\"手机号（可选）\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n          >\r\n            <a-input v-model:value=\"registerForm.phone\" />\r\n          </a-form-item>\r\n          <a-form-item :wrapperCol=\"{ span: 24, offset: 0 }\">\r\n            <a-button type=\"primary\" htmlType=\"submit\">提交注册</a-button>\r\n            <a-button style=\"margin-left: 8px\" @click=\"handleCancel\"\r\n              >取消注册</a-button\r\n            >\r\n          </a-form-item>\r\n        </a-form>\r\n      </a-card>\r\n    </a-layout-content>\r\n  </a-layout>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { reactive } from \"vue\";\r\nimport {\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Card,\r\n  Layout,\r\n  InputPassword,\r\n} from \"ant-design-vue\";\r\n\r\nexport default {\r\n  components: {\r\n    \"a-layout\": Layout,\r\n    \"a-layout-content\": Layout.Content,\r\n    \"a-card\": Card,\r\n    \"a-form-item\": Form.Item,\r\n    \"a-input\": Input,\r\n    \"a-input-password\": InputPassword,\r\n    \"a-button\": Button,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      registerForm: reactive({\r\n        username: \"\",\r\n        password: \"\",\r\n        confirm: \"\",\r\n        employeeKey: \"\",\r\n        phone: \"\",\r\n      }),\r\n      rules: {\r\n        username: [\r\n          {\r\n            required: false,\r\n            message: \"请输入用户名\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: false,\r\n            message: \"请输入密码\",\r\n            pattern: /^\\S{8,16}$/,\r\n          },\r\n        ],\r\n        confirm: [\r\n          { required: false, message: \"请确认密码\", trigger: \"blur\" },\r\n          {\r\n            validator: (_, value) => {\r\n              // 使用箭头函数来捕获外围作用域中的 this\r\n              if (!value || value === this.registerForm.password) {\r\n                return Promise.resolve();\r\n              }\r\n              return Promise.reject(new Error(\"两次输入的密码不一致\"));\r\n            },\r\n          },\r\n        ],\r\n        employeeKey: [{ required: false }],\r\n        phone: [\r\n          {\r\n            required: false,\r\n            pattern: /^\\S{11,11}$/,\r\n            message: \"请输入正确的手机号\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    handleCancel() {\r\n      this.$router.push(\"/\");\r\n      this.isModalVisible = false; // 关闭模态框\r\n    },\r\n    login() {\r\n      const loginData = {\r\n        username: this.registerForm.username,\r\n        password: this.registerForm.password,\r\n        employeeKey: this.registerForm.employeeKey,\r\n        phone: this.registerForm.phone,\r\n      };\r\n      console.log(\"Username:\", this.registerForm.username);\r\n      console.log(\"Password:\", this.registerForm.password);\r\n      console.log(\"EmployeeKey:\", this.registerForm.employeeKey);\r\n      console.log(\"Phone:\", this.registerForm.phone);\r\n      axios\r\n        .post(\"\", loginData)\r\n        .then((response) => {\r\n          // 处理登录成功，例如保存token\r\n          localStorage.setItem(\"token\", response.data.token);\r\n          // 跳转到主页或其他页面\r\n          this.$router.push(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          // 处理错误\r\n          console.error(\"登录失败\", error);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.layout {\r\n  height: 100vh;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}