{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport { reactive } from \"vue\";\nimport { Form, Input, Button, Card, Layout, InputPassword } from \"ant-design-vue\";\n// import { reactive } from \"vue\";\nexport default {\n  components: {\n    \"a-layout\": Layout,\n    \"a-layout-content\": Layout.Content,\n    \"a-card\": Card,\n    \"a-form-item\": Form.Item,\n    \"a-input\": Input,\n    \"a-input-password\": InputPassword,\n    \"a-button\": Button\n  },\n  data() {\n    return {\n      registerForm: reactive({\n        username: \"\",\n        password: \"\",\n        confirm: \"\",\n        employeeKey: \"\",\n        phone: \"\"\n      }),\n      rules: {\n        username: [{\n          required: false,\n          message: \"请输入用户名\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: false,\n          message: \"请输入密码\",\n          pattern: /^\\S{8,16}$/\n        }],\n        confirm: [{\n          required: false,\n          message: \"请确认密码\",\n          trigger: \"blur\"\n        }, {\n          validator: (_, value) => {\n            // 使用箭头函数来捕获外围作用域中的 this\n            if (!value || value === this.registerForm.password) {\n              return Promise.resolve();\n            }\n            return Promise.reject(new Error(\"两次输入的密码不一致\"));\n          }\n        }],\n        employeeKey: [{\n          required: false\n        }],\n        phone: [{\n          required: false,\n          pattern: /^\\S{11,11}$/,\n          message: \"请输入正确的手机号\"\n        }]\n      }\n    };\n  },\n  methods: {\n    handleCancel() {\n      this.$router.push(\"/\");\n      this.isModalVisible = false; // 关闭模态框\n    },\n    login() {\n      const loginData = {\n        username: this.registerForm.username,\n        password: this.registerForm.password,\n        employeeKey: this.registerForm.employeeKey,\n        phone: this.registerForm.phone\n      };\n      console.log(\"Username:\", this.registerForm.username);\n      console.log(\"Password:\", this.registerForm.password);\n      console.log(\"EmployeeKey:\", this.registerForm.employeeKey);\n      console.log(\"Phone:\", this.registerForm.phone);\n      axios.post(\"\", loginData).then(response => {\n        // 处理登录成功，例如保存token\n        localStorage.setItem(\"token\", response.data.token);\n        // 跳转到主页或其他页面\n        this.$router.push(\"/\");\n      }).catch(error => {\n        // 处理错误\n        console.error(\"登录失败\", error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","reactive","Form","Input","Button","Card","Layout","InputPassword","components","Content","Item","data","registerForm","username","password","confirm","employeeKey","phone","rules","required","message","trigger","pattern","validator","_","value","Promise","resolve","reject","Error","methods","handleCancel","$router","push","isModalVisible","login","loginData","console","log","post","then","response","localStorage","setItem","token","catch","error"],"sources":["E:\\code\\Django\\project\\front\\front\\src\\components\\EnrollWindow.vue"],"sourcesContent":["<template>\r\n  <a-layout class=\"layout\">\r\n    <a-layout-content style=\"padding: 24px\">\r\n      <a-card title=\"新用户注册\" :bordered=\"false\">\r\n        <a-form :model=\"registerForm\" :rules=\"rules\" @finish=\"login\">\r\n          <a-form-item\r\n            name=\"username\"\r\n            label=\"新用户名\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n            hasFeedback\r\n          >\r\n            <a-input v-model:value=\"registerForm.username\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"password\"\r\n            label=\"密码\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n            hasFeedback\r\n          >\r\n            <a-input-password v-model:value=\"registerForm.password\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"confirm\"\r\n            label=\"确认密码\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n            hasFeedback\r\n          >\r\n            <a-input-password v-model:value=\"registerForm.confirm\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"employeeKey\"\r\n            label=\"员工密钥（可选）\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n          >\r\n            <a-input v-model:value=\"registerForm.employeeKey\" />\r\n          </a-form-item>\r\n          <a-form-item\r\n            name=\"phone\"\r\n            label=\"手机号（可选）\"\r\n            :labelCol=\"{ span: 24 }\"\r\n            :wrapperCol=\"{ span: 24 }\"\r\n          >\r\n            <a-input v-model:value=\"registerForm.phone\" />\r\n          </a-form-item>\r\n          <a-form-item :wrapperCol=\"{ span: 24, offset: 0 }\">\r\n            <a-button type=\"primary\" htmlType=\"submit\">提交注册</a-button>\r\n            <a-button style=\"margin-left: 8px\" @click=\"handleCancel\"\r\n              >取消注册</a-button\r\n            >\r\n          </a-form-item>\r\n        </a-form>\r\n      </a-card>\r\n    </a-layout-content>\r\n  </a-layout>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { reactive } from \"vue\";\r\nimport {\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Card,\r\n  Layout,\r\n  InputPassword,\r\n} from \"ant-design-vue\";\r\n// import { reactive } from \"vue\";\r\nexport default {\r\n  components: {\r\n    \"a-layout\": Layout,\r\n    \"a-layout-content\": Layout.Content,\r\n    \"a-card\": Card,\r\n    \"a-form-item\": Form.Item,\r\n    \"a-input\": Input,\r\n    \"a-input-password\": InputPassword,\r\n    \"a-button\": Button,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      registerForm: reactive({\r\n        username: \"\",\r\n        password: \"\",\r\n        confirm: \"\",\r\n        employeeKey: \"\",\r\n        phone: \"\",\r\n      }),\r\n      rules: {\r\n        username: [\r\n          {\r\n            required: false,\r\n            message: \"请输入用户名\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            required: false,\r\n            message: \"请输入密码\",\r\n            pattern: /^\\S{8,16}$/,\r\n          },\r\n        ],\r\n        confirm: [\r\n          { required: false, message: \"请确认密码\", trigger: \"blur\" },\r\n          {\r\n            validator: (_, value) => {\r\n              // 使用箭头函数来捕获外围作用域中的 this\r\n              if (!value || value === this.registerForm.password) {\r\n                return Promise.resolve();\r\n              }\r\n              return Promise.reject(new Error(\"两次输入的密码不一致\"));\r\n            },\r\n          },\r\n        ],\r\n        employeeKey: [{ required: false }],\r\n        phone: [\r\n          {\r\n            required: false,\r\n            pattern: /^\\S{11,11}$/,\r\n            message: \"请输入正确的手机号\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    handleCancel() {\r\n      this.$router.push(\"/\");\r\n      this.isModalVisible = false; // 关闭模态框\r\n    },\r\n    login() {\r\n      const loginData = {\r\n        username: this.registerForm.username,\r\n        password: this.registerForm.password,\r\n        employeeKey: this.registerForm.employeeKey,\r\n        phone: this.registerForm.phone,\r\n      };\r\n      console.log(\"Username:\", this.registerForm.username);\r\n      console.log(\"Password:\", this.registerForm.password);\r\n      console.log(\"EmployeeKey:\", this.registerForm.employeeKey);\r\n      console.log(\"Phone:\", this.registerForm.phone);\r\n      axios\r\n        .post(\"\", loginData)\r\n        .then((response) => {\r\n          // 处理登录成功，例如保存token\r\n          localStorage.setItem(\"token\", response.data.token);\r\n          // 跳转到主页或其他页面\r\n          this.$router.push(\"/\");\r\n        })\r\n        .catch((error) => {\r\n          // 处理错误\r\n          console.error(\"登录失败\", error);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.layout {\r\n  height: 100vh;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}